<html>
	<head>

		<style type="text/css">
			canvas {
			    margin: 1em;
			    border: 1px solid #dddddd;
		    }
	    </style>


		<script type="text/javascript">

		black = {
		    r: 0,
		    g: 0,
		    b: 0,
		    a: 255
		};

		function Open(){
		
			ws = new WebSocket("ws://10.241.26.30:80/websocket");
			ws.onopen = function(){
				console.log('Connected');
			};

			element = document.getElementById("canvas2");
			canvas = element.getContext("2d");

			var setPixel = function (x,y,c) {
		    var p=canvas.createImageData(1,1);
		    p.data[0]=c.r;
		    p.data[1]=c.g;
		    p.data[2]=c.b;
		    p.data[3]=c.a;
		    canvas.putImageData(p,x,y);
		    canvas.putImageData(p,x,y+1);
		    canvas.putImageData(p,x,y+2);
		    canvas.putImageData(p,x,y+3);
		    canvas.putImageData(p,x,y+4);
		    canvas.putImageData(p,x,y+5);
		    canvas.putImageData(p,x,y+6);
		    canvas.putImageData(p,x,y+7);

			}

			ws.onmessage = function (evt)
			{
				var received_msg = evt.data;
				setPixel(1, 1, black);
			};
			ws.onclose = function()
			{
				console.log('Connection closed log');
			};
		}

		function Close() {
			ws.close();
		}

		function PutCanvas(){ 
			div = document.getElementById("divid");
			c1 = document.createElement('canvas');
			c1.setAttribute('id','canvas2');
			c1.setAttribute('width','700');
			c1.setAttribute('height','10');
			div.appendChild(c1);


			var element,
			    canvas,
			    width,
			    height,
			    red;



			// init canvas
			element = document.getElementById("canvas2");
			canvas = element.getContext("2d");


			width = element.width;
			height = element.height;
			canvas.fillStyle = '#eeeeee';
			canvas.fillRect(0, 0, width, height);

			
			// setpixel
			var setPixel = function (x,y,c) {
			    var p=canvas.createImageData(1,1);
			    p.data[0]=c.r;
			    p.data[1]=c.g;
			    p.data[2]=c.b;
			    p.data[3]=c.a;
			    canvas.putImageData(p,x,y);
			    canvas.putImageData(p,x,y+1);
			    canvas.putImageData(p,x,y+2);
			    canvas.putImageData(p,x,y+3);
			    canvas.putImageData(p,x,y+4);
			    canvas.putImageData(p,x,y+5);
			    canvas.putImageData(p,x,y+6);
			    canvas.putImageData(p,x,y+7);
			}


			element.onclick = function (e) { setPixel(e.offsetX, e.offsetY, black);};
		}

		</script>
	</head>
	<body>
		<div id="menu1">
			<a href="javascript:Open()">Open websocket connection</a>
			<a href="javascript:Close()">Close websocket connection</a>
			<a href="javascript:SendMsg()">SendMsg</a>
		</div>
		<input type="text" id="txt" size="120" value="11112" ></input>
		
		<div id="menu2">
			<a href="javascript:Open_telnet()">Open telnet 0.116</a>
		</div>
	<!--	
		<div id="msgs"></div>
		<input id="count" type="text" value="0"></input>
		<progress id="progressBar" value="0" max="100"></progress><br>
		<div id="files_div"><br></div>
		<textarea style="resize:none;width:130px;font-family:Consolas;vertical-align:top;height:40px;overflow:hidden;">1234567/1234567</textarea><br><br>
	-->
<table id="files_table" style="border-style:ridge;border-collapse:collapse;font-family:Consolas;font-size:12px;" cellspacing="0" border="0" cellpadding="1" height="1" width="1024">

<tr id="tr_basic">
<td id="td1">0</td>
<td id="td2"><progress id="progressBar" value="0" max="100"></progress></td>
<td id="td3">Sent</td>
<td id="td4">/ End</td>
<td id="td5">FileName</td>
</tr>

</table>

<canvas id="canvas1" width="700", height="10">
Random Canvas
</canvas>

<input type="button" value="Put" onclick="PutCanvas()">

<div id="divid"></div>
	</body>
</html>